(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-341a6cd1"],{"143b":function(t,s,e){"use strict";e("1eb5")},"1eb5":function(t,s,e){},"2a37":function(t,s,e){"use strict";e("5ccf")},"5ccf":function(t,s,e){},b491:function(t,s,e){"use strict";e("ca9e")},c66d:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("Spinner",{class:{"fade-out":!t.isLoading}}),e("div",{staticClass:"row shadow card profile__block mb-5"},[e("img",{staticClass:"user__cover",attrs:{loading:"lazy",src:t.profile.cover}}),e("UserDetail",{attrs:{profile:t.profile,orders:t.orders,isLoading:t.isLoading}}),e("ProfileComments",{attrs:{comments:t.notRepeatComments,likes:t.likes,"is-processing":t.isProcessing,isLoading:t.isLoading}})],1)],1)},a=[],o=e("1da1"),r=(e("b0c0"),e("4de4"),e("96cf"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row p-0 m-0 scoper"},[e("div",{staticClass:"col-md-4 mt-3 profile__avatar"},[e("figure",{staticClass:"figure"},[e("img",{staticClass:"figure-img img-fluid rounded img__box mxw__avatar rounded-circle",attrs:{loading:"lazy",src:t.profile.avatar}}),e("figcaption",{staticClass:"figure-caption"})])]),t.currentUser.id===t.profile.id?e("div",{staticClass:"profile__control__box row col-8 justify-content-end"},[e("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"editProfile",params:{id:t.profile.id}}}},[e("i",{staticClass:"fas fa-pencil-alt text-white"}),t._v(" 編輯個人檔案 ")])],1):t._e(),e("div",{staticClass:"row p-3 mr-1 ml-1 col-8"},[e("div",{staticClass:"col-md-12 mt-5"},[e("h4",{directives:[{name:"show",rawName:"v-show",value:t.profile.name,expression:"profile.name"}],staticClass:"col-md-12 mt-4 font-weight-bold"},[t._v(" "+t._s(t.profile.name)+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.profile.account,expression:"profile.account"}],staticClass:"col-md-12 mt-3"},[e("i",{staticClass:"fas fa-user-circle mr-1"}),t._v(" "+t._s(t.profile.account)+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.profile.email,expression:"profile.email"}],staticClass:"col-md-12 mt-2"},[e("i",{staticClass:"fas fa-envelope mr-1"}),t._v(" "+t._s(t.profile.email)+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.profile.phone,expression:"profile.phone"}],staticClass:"col-md-12 mt-2"},[e("i",{staticClass:"fas fa-phone-alt mr-1"}),t._v(" "+t._s(t.profile.phone)+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.profile.address,expression:"profile.address"}],staticClass:"col-md-12 mt-2"},[e("i",{staticClass:"fas fa-map-marker-alt mr-2"}),t._v(" "+t._s(t.profile.address)+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.profile.introduction,expression:"profile.introduction"}],staticClass:"col-md-12 mt-3"},[t._v(" "+t._s(t.profile.introduction)+" ")]),e("div",{staticClass:"row m-0 mt-4 p-0 align-items-center"},[e("i",{staticClass:"fas fa-trophy pl-3"}),t.orders>1?e("div",{staticClass:"ml-3"},[t._v(" 已建立 "),e("strong",{staticClass:"text-info"},[t._v(" "+t._s(t.orders)+" ")]),t._v(" 筆訂單 ")]):e("div",{staticClass:"ml-3"},[t._v("未建立任何訂單")]),t.profile.Comments.length>1?e("div",{staticClass:"ml-3"},[t._v(" 發表過 "),e("strong",{staticClass:"text-info"},[t._v(t._s(t.profile.Comments.length))]),t._v(" 則商品評價 ")]):e("div",{staticClass:"ml-3"},[t._v("尚無發表任何商品評論")])])])])])}),c=[],n=e("5530"),l=(e("a9e3"),e("2f62")),d={name:"UserDetail",computed:Object(n["a"])({},Object(l["b"])(["currentUser"])),props:{profile:{type:Object,required:!0},orders:{type:Number,required:!0},isLoading:{type:Boolean,default:!1}}},m=d,p=(e("143b"),e("2877")),u=Object(p["a"])(m,r,c,!1,null,"bd6ca9b4",null),f=u.exports,v=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"col-12 m-0 pl-0 pr-0 profile__info__block"},[e("div",{staticClass:"row profile__nav__block",attrs:{id:"profileNav"}},[e("div",{staticClass:"btn profile__nav__button",class:{active:"comments"===t.tabVisible},on:{click:function(s){return t.showTab("comments")}}},[t._v(" 評論過的商品 ")]),e("div",{staticClass:"btn profile__nav__button",class:{active:"likes"===t.tabVisible},on:{click:function(s){return t.showTab("likes")}}},[t._v(" 喜歡的商品 ")])]),0!==t.comments.length?e("div",{staticClass:"row col-md-12 mt-4 mr-0 ml-0 mb-4 tab-pane fade",class:{show:"comments"===t.tabVisible}},t._l(t.comments,(function(s){return e("div",{key:s.id,staticClass:"col-md-6 mt-3 mb-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 mr-3"},[e("router-link",{attrs:{to:{name:"products",params:{id:s.ProductId}}}},[e("img",{staticClass:"mr-3 img__box mxw__profile img-thumbnail shadow-sm lazy",attrs:{src:s.Product.image}})])],1),e("div",{staticClass:"col-md-8 p-1"},[e("router-link",{attrs:{to:{name:"products",params:{id:s.ProductId}}}},[e("h5",{},[t._v(t._s(s.Product.name))])]),e("span",{staticClass:"badge badge-pill badge-info"},[t._v(" "+t._s(s.Product.Category.name)+" ")]),e("div",{staticClass:"mt-2 profile__info__description"},[t._v(" "+t._s(s.description)+" ")])],1)])])})),0):e("div",{staticClass:"row col-md-12 mt-4 mr-0 ml-0 mb-4 tab-pane fade",class:{show:"comments"===t.tabVisible},attrs:{id:"comments"}},[e("h3",{staticClass:"col-12 text-center"},[t._v("尚未發表任何評論")])]),0!==t.likes.length?e("div",{staticClass:"row col-md-12 mt-4 mr-0 ml-0 mb-4 tab-pane fade",class:{show:"likes"===t.tabVisible}},t._l(t.likes,(function(s){return e("div",{key:s.id,staticClass:"col-md-6 mt-3 mb-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 mr-3"},[e("router-link",{attrs:{to:{name:"products",params:{id:s.ProductId}}}},[e("img",{staticClass:"mr-3 img__box mxw__profile img-thumbnail shadow-sm lazy",attrs:{src:s.Product.image}})])],1),e("div",{staticClass:"col-md-8 p-1"},[e("router-link",{attrs:{to:{name:"products",params:{id:s.ProductId}}}},[e("h5",{staticClass:"mt-0"},[t._v(t._s(s.Product.name))])]),e("span",{staticClass:"badge badge-pill badge-info"},[t._v(t._s(s.Product.Category.name))]),e("div",{staticClass:"mt-2 profile__info__description"},[t._v(" "+t._s(s.Product.description)+" ")]),e("div",{staticClass:"btn btn-seco"})],1)])])})),0):e("div",{staticClass:"row col-md-12 mt-4 mr-0 ml-0 mb-4 tab-pane fade",class:{show:"likes"===t.tabVisible}},[e("h3",{staticClass:"col-12 text-center"},[t._v("目前沒有喜歡的商品")])])])},_=[],b={name:"UserDetailComments",props:{comments:{type:Array,required:!0},likes:{type:Array,required:!0}},data:function(){return{tabVisible:"comments"}},methods:{showTab:function(t){this.tabVisible=t},addFavorite:function(){this.detail=Object(n["a"])(Object(n["a"])({},this.product),{},{isFavorited:!0})},removeFavorite:function(){this.product=Object(n["a"])(Object(n["a"])({},this.product),{},{isFavorited:!1})},addLike:function(){this.product=Object(n["a"])(Object(n["a"])({},this.product),{},{isLiked:!0})},removeLike:function(){this.product=Object(n["a"])(Object(n["a"])({},this.product),{},{isLiked:!1})}},created:function(){}},h=b,C=(e("b491"),Object(p["a"])(h,v,_,!1,null,"feb8df3c",null)),w=C.exports,g=e("2375"),k=e("4cce"),x=e("2fa3"),y={name:"Profile",components:{UserDetail:f,ProfileComments:w,Spinner:g["a"]},data:function(){return{profile:{id:"",account:"",name:"",email:"",password:"",phone:"",address:"",role:"",avatar:"",cover:"",introduction:"",createdAt:"",updatedAt:"",Comments:[]},likes:[],orders:0,notRepeatComments:[],isProcessing:!1,isLoading:!0}},methods:{fetchData:function(t){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s.isLoading=!0,e.next=4,k["a"].getUser({id:t});case 4:i=e.sent,a=i.data,s.profile=a.profile,s.likes=a.likes,s.orders=a.orders.length,s.notRepeatComments=a.notRepeatComments,s.isLoading=!1,e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0),s.isProcessing=!1,s.toastFire("error",e.t0||"取得使用者資訊失敗，請檢查連線狀態或稍後再試");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))()},createComment:function(t){console.log("payload",t);var s=t.commentId,e=t.detailId,i=t.text;this.Comments.push({id:s,text:i,productId:e,createdAt:new Date,User:{id:this.currentUser.id,name:this.currentUser.name}})},deleteComment:function(t){this.Comments=this.Comments.filter((function(s){return s.id!==t}))},toastFire:function(t,s){x["a"].fire({icon:t,title:s,background:"#eee",showConfirmButton:!1})}},beforeRouteUpdate:function(t,s,e){var i=t.params.id;this.fetchData(i),e()},created:function(){var t=this.$route.params.id;this.fetchData(t)}},P=y,j=(e("2a37"),Object(p["a"])(P,i,a,!1,null,null,null));s["default"]=j.exports},ca9e:function(t,s,e){}}]);
//# sourceMappingURL=chunk-341a6cd1.ebb0021c.js.map