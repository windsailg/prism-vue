{"version":3,"sources":["webpack:///./src/components/SingleDetail.vue?9ac8","webpack:///./src/views/ProductDetail.vue?1c19","webpack:///./src/components/SingleDetail.vue?6022","webpack:///src/components/SingleDetail.vue","webpack:///./src/components/SingleDetail.vue?5611","webpack:///./src/components/SingleDetail.vue?7a0b","webpack:///./src/components/SingleComments.vue?4ee8","webpack:///src/components/SingleComments.vue","webpack:///./src/components/SingleComments.vue?e74e","webpack:///./src/components/SingleComments.vue","webpack:///./src/components/CreateComment.vue?fc22","webpack:///src/components/CreateComment.vue","webpack:///./src/components/CreateComment.vue?052a","webpack:///./src/components/CreateComment.vue","webpack:///src/views/ProductDetail.vue","webpack:///./src/views/ProductDetail.vue?3ee7","webpack:///./src/views/ProductDetail.vue?ab51","webpack:///./src/views/ProductDetail.vue?c206","webpack:///./src/views/ProductDetail.vue?174f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","isLoading","attrs","product","Comments","length","likes","active","tabState","on","$event","preventDefault","stopPropagation","toggleTabContent","_v","description","show","_s","isProcessing","currentUser","id","createComment","directives","name","rawName","value","expression","deleteComment","staticRenderFns","image","Category","price","ninusQuantity","domProps","target","composing","quantity","plusQuantity","_m","removeLike","addLike","viewCount","likesLength","commentsLength","props","initialProduct","type","Object","required","Number","Boolean","default","data","methods","toastFire","icon","action","title","text","background","showConfirmButton","watch","component","_l","comment","key","deleteButtonClick","_e","params","UserId","User","_f","createdAt","Array","mixins","handleSubmit","$router","back","computed","components","SingleDetail","SingleComments","CreateComment","Spinner","CategoryId","state","created","fetchData","beforeRouteUpdate","next"],"mappings":"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","file":"js/chunk-83744a4a.505af9cf.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleDetail.vue?vue&type=style&index=0&id=4e78647a&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('hr'),_c('Spinner',{class:{ 'fade-out': !_vm.isLoading }}),_c('div',{staticClass:\"row p-0 m-0 mb-5 mt-4 card shadow\"},[_c('div',{staticClass:\"row p-3 mr-3 mt-5 ml-3\"},[_c('SingleDetail',{attrs:{\"initial-product\":_vm.product,\"commentsLength\":_vm.Comments.length,\"likesLength\":_vm.likes.length,\"is-loading\":_vm.isLoading}})],1),_c('div',{staticClass:\"col-12 m-0 mb-3 pl-0 pr-0 product__info__block\"},[_c('div',{staticClass:\"row product__nav__block\",attrs:{\"id\":\"productNav\"}},[_c('div',{staticClass:\"btn product__nav__button\",class:{ active: _vm.tabState === 'productDetail' },on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.toggleTabContent('productDetail')}}},[_vm._v(\" 商品詳情 \")]),_c('div',{staticClass:\"btn product__nav__button\",class:{ active: _vm.tabState === 'productComments' },on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.toggleTabContent('productComments')}}},[_vm._v(\" 商品評論 \")])]),(_vm.product.description !== '')?_c('div',{staticClass:\"row col-md-12 mt-5 mr-0 ml-0 mb-5 tab-panel\",class:{ show: _vm.tabState === 'productDetail' }},[_c('div',{staticClass:\"col-12\"},[_vm._v(_vm._s(_vm.product.description))])]):_c('div',{staticClass:\"row col-md-12 mt-5 mr-0 ml-0 mb-5 tab-panel\",class:{ show: _vm.tabState === 'productDetail' }},[_c('h3',{staticClass:\"col-12 text-center\"},[_vm._v(\"本商品目前無任何描述\")])]),_c('div',{staticClass:\"row col-md-12 mt-2 mr-0 ml-0 mb-5 tab-panel\",class:{ show: _vm.tabState === 'productComments' }},[_c('div',{staticClass:\"row col-md-12 mt-4 mr-0 ml-0 mb-2\"},[_c('CreateComment',{attrs:{\"is-processing\":_vm.isProcessing,\"currentUser\":_vm.currentUser,\"productId\":_vm.product.id},on:{\"createComment\":_vm.createComment}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.Comments.length),expression:\"Comments.length\"}],staticClass:\"row col-md-12 mr-0 ml-0\"},[_c('SingleComments',{attrs:{\"is-processing\":_vm.isProcessing,\"currentUser\":_vm.currentUser,\"Comments\":_vm.Comments},on:{\"deleteComment\":_vm.deleteComment}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.Comments.length),expression:\"!Comments.length\"}],staticClass:\"row col-md-12 mt-5 mr-0 ml-0 mb-5 tab-panel\",class:{ show: _vm.tabState === 'productComments' }},[_c('h3',{staticClass:\"col-12 text-center\"},[_vm._v(\"尚無評論\")])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoading),expression:\"!isLoading\"}],staticClass:\"row p-3 mr-3 ml-3\"},[_c('div',{staticClass:\"col-lg-5 img__box__product\"},[_c('img',{staticClass:\"img-responsive center-block mxw__product\",attrs:{\"src\":_vm.product.image}})]),_c('div',{staticClass:\"col-md-7\"},[_c('h3',{staticClass:\"product__title__block font-weight-bold\"},[_vm._v(_vm._s(_vm.product.name))]),_c('span',{staticClass:\"badge-pill badge-info\"},[_vm._v(_vm._s(_vm.product.Category.name))]),_c('div',{staticClass:\"mt-3 mb-3 product__description__block\"},[_vm._v(_vm._s(_vm.product.description))]),_c('h4',{staticClass:\"text-warning\"},[_c('strong',[_vm._v(\"NT: \"+_vm._s(_vm.product.price))])]),_c('div',{staticClass:\"row m-0\"},[_c('form',{staticClass:\"row m-0 mr-2\",attrs:{\"method\":\"POST\"}},[_c('div',{staticClass:\"quantity__block mr-2\",attrs:{\"id\":\"quantityBlock\"}},[_c('div',{staticClass:\"quantity__box quantity__minus\",attrs:{\"id\":\"quantityMinus\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.ninusQuantity($event)}}},[_c('span',{staticClass:\"quantity__ele\"})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.quantity),expression:\"quantity\"}],staticClass:\"inputer quantity__box quantity__number\",attrs:{\"id\":\"itemQuantity\",\"type\":\"number\",\"value\":\"1\",\"min\":\"1\",\"max\":\"99\"},domProps:{\"value\":(_vm.quantity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.quantity=$event.target.value}}}),_c('div',{staticClass:\"quantity__box quantity__plus\",attrs:{\"id\":\"quantityPlus\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.plusQuantity($event)}}},[_c('span',{staticClass:\"quantity__ele\"}),_c('span',{staticClass:\"quantity__ele\"})])]),_c('input',{attrs:{\"type\":\"hidden\",\"name\":\"productId\"},domProps:{\"value\":_vm.product.id}}),_vm._m(0)]),(_vm.product.isLiked)?_c('div',[_c('button',{staticClass:\"btn mr-2 product__like\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.removeLike(_vm.product.id)}}},[_c('i',{staticClass:\"fas fa-heart text-danger\"})])]):_c('div',[_c('button',{staticClass:\"btn mr-2 product__like\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.addLike(_vm.product.id)}}},[_c('i',{staticClass:\"far fa-heart text-danger\"})])])])]),_c('div',{staticClass:\"row col-lg-5 p-0 pl-3 pr-3 mt-4 m-0 flex justify-content-start align-items-center\"},[_c('div',{staticClass:\"col-3 p-0 mr-1\"},[_c('span',{staticClass:\"text-info font-weight-bold mr-1\"},[_vm._v(_vm._s(_vm.product.viewCount))]),_vm._v(\"次瀏覽 \")]),_c('div',{staticClass:\"col-3 p-0 mr-1\"},[_c('span',{staticClass:\"text-info font-weight-bold mr-1\"},[_vm._v(_vm._s(_vm.likesLength))]),_vm._v(\"個喜歡 \")]),_c('div',{staticClass:\"col-3 p-0 mr-1\"},[_c('span',{staticClass:\"text-info font-weight-bold mr-1\"},[_vm._v(_vm._s(_vm.commentsLength))]),_vm._v(\"則評論 \")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-info rounded-pill pr-3 pl-3 add__cart font-weight-bold\",attrs:{\"type\":\"submit\"}},[_c('i',{staticClass:\"fas fa-shopping-bag ml-2 mr-2\"}),_vm._v(\" 加入購物籃 \")])}]\n\nexport { render, staticRenderFns }","<template>\r\n\r\n  <div v-show=\"!isLoading\" class=\"row p-3 mr-3 ml-3\">\r\n\r\n    <div class=\"col-lg-5 img__box__product\">\r\n      <img class=\"img-responsive center-block mxw__product\" :src=\"product.image\">\r\n    </div>\r\n\r\n    <div class=\"col-md-7\">\r\n\r\n      <h3 class=\"product__title__block font-weight-bold\">{{product.name}}</h3>\r\n      <span class=\"badge-pill badge-info\">{{product.Category.name}}</span>\r\n      <div class=\"mt-3 mb-3 product__description__block\">{{product.description}}</div>\r\n\r\n      <h4 class=\"text-warning\">\r\n        <strong>NT: {{product.price}}</strong>\r\n      </h4>\r\n\r\n      <div class=\"row m-0\">\r\n\r\n        <form class=\"row m-0 mr-2\" method=\"POST\">\r\n\r\n          <div id=\"quantityBlock\" class=\"quantity__block mr-2\">\r\n            <div id=\"quantityMinus\" class=\"quantity__box quantity__minus\"\r\n             @click.prevent.stop=\"ninusQuantity\"\r\n            >\r\n              <span class=\"quantity__ele\"></span>\r\n            </div>\r\n              <input id=\"itemQuantity\"\r\n                type=\"number\"\r\n                class=\"inputer quantity__box quantity__number\"\r\n                value=\"1\" min=\"1\" max=\"99\"\r\n                v-model=\"quantity\"\r\n              >\r\n            <div \r\n              id=\"quantityPlus\"\r\n              class=\"quantity__box quantity__plus\"\r\n              @click.prevent.stop=\"plusQuantity\"\r\n            >\r\n              <span class=\"quantity__ele\"></span>\r\n              <span class=\"quantity__ele\"></span>\r\n            </div>\r\n          </div>\r\n          \r\n          <input type=\"hidden\" name=\"productId\" :value=\"product.id\">\r\n          <button type=\"submit\" class=\"btn btn-info rounded-pill pr-3 pl-3 add__cart font-weight-bold\"> \r\n            <i class=\"fas fa-shopping-bag ml-2 mr-2\"></i>\r\n            加入購物籃\r\n            </button>\r\n\r\n        </form>\r\n\r\n        <div v-if=\"product.isLiked\"\r\n        >\r\n          <button \r\n            type=\"submit\" \r\n            class=\"btn mr-2 product__like\"\r\n            @click.prevent.stop=\"removeLike(product.id)\"\r\n            :disabled=\"isProcessing\"\r\n          >\r\n            <i class=\"fas fa-heart text-danger\"></i>\r\n            </button>\r\n        </div>\r\n\r\n        <div v-else\r\n          \r\n        >\r\n          <button \r\n            type=\"submit\" \r\n            class=\"btn mr-2 product__like\"\r\n            @click.prevent.stop=\"addLike(product.id)\"\r\n            :disabled=\"isProcessing\"\r\n          >\r\n            <i class=\"far fa-heart text-danger\">\r\n            </i>\r\n            </button>\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"row col-lg-5 p-0 pl-3 pr-3 mt-4 m-0 flex justify-content-start align-items-center\">\r\n\r\n      <div class=\"col-3 p-0 mr-1\">\r\n        <span class=\"text-info font-weight-bold mr-1\">{{product.viewCount}}</span>次瀏覽\r\n      </div>\r\n      <div class=\"col-3 p-0 mr-1\">\r\n        <span class=\"text-info font-weight-bold mr-1\">{{likesLength}}</span>個喜歡\r\n      </div>\r\n      <div class=\"col-3 p-0 mr-1\">\r\n        <span class=\"text-info font-weight-bold mr-1\">{{commentsLength}}</span>則評論\r\n      </div>\r\n\r\n    </div>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport usersAPI from '../apis/users'\r\nimport { Toast } from '../utils/helpers'\r\nexport default {\r\n  name: 'SingleDetail',\r\n  props: {\r\n    initialProduct: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    commentsLength: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    likesLength: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    isLoading: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      product: this.initialProduct,\r\n      quantity: 1,\r\n      isProcessing: false\r\n    }\r\n  },\r\n  methods: {\r\n    async addLike(id) {\r\n      try {\r\n        this.isProcessing = true\r\n        const { data } = await usersAPI.addLike({ id })\r\n        if (data.status !== 'success') {\r\n          this.toastFire('error', data.message)\r\n          throw new Error(data.message)\r\n        }\r\n        this.product = {\r\n          ...this.product,\r\n          isLiked: true,\r\n        }\r\n        this.toastFire('success', data.message)\r\n        this.isProcessing = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.isProcessing = false\r\n        this.toastFire('error', '操作失敗，請稍後再試')\r\n      }\r\n    },\r\n    async removeLike(id) {\r\n      try {\r\n        this.isProcessing = true\r\n        const { data } = await usersAPI.removeLike({ id })\r\n        if (data.status !== 'success') {\r\n          this.toastFire('error', data.message)\r\n          throw new Error(data.message)\r\n        }\r\n        this.product = {\r\n          ...this.product,\r\n          isLiked: false,\r\n        }\r\n        this.toastFire('success', data.message)\r\n        this.isProcessing = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.isProcessing = false\r\n        this.toastFire('error', '操作失敗，請稍後再試')\r\n      }\r\n    },\r\n    toastFire(action, text) {\r\n      Toast.fire({\r\n        icon: action,\r\n        title: text,\r\n        background: '#eee',\r\n        showConfirmButton: false,\r\n      })\r\n    },\r\n    plusQuantity() {\r\n      if (this.quantity >= 99) return\r\n      this.quantity ++\r\n    },\r\n    ninusQuantity() {\r\n      if (this.quantity <= 1) return\r\n      this.quantity --\r\n    }\r\n  },\r\n  watch: {\r\n    initialProduct (newValue) {\r\n      this.product = {\r\n        ...this.product,\r\n        ...newValue\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.img__box__product{\r\n  min-height: 370px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SingleDetail.vue?vue&type=template&id=4e78647a&scoped=true&\"\nimport script from \"./SingleDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./SingleDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SingleDetail.vue?vue&type=style&index=0&id=4e78647a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e78647a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12\"},_vm._l((_vm.Comments),function(comment){return _c('div',{key:comment.id,staticClass:\"mt-4 mb-2\"},[_c('blockquote',{staticClass:\"blockquote mb-0\"},[(_vm.currentUser.isAdmin)?_c('button',{staticClass:\"btn btn-sm btn-outline-primary float-right\",attrs:{\"type\":\"button\",\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.deleteButtonClick(comment.id)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e(),_c('h5',[_c('router-link',{attrs:{\"to\":{ name: 'profile', params: { id: comment.UserId}}}},[_vm._v(\" \"+_vm._s(comment.User.name)+\" \")])],1),_c('div',[_vm._v(_vm._s(comment.description))]),_c('footer',{staticClass:\"blockquote-footer\"},[_vm._v(\" \"+_vm._s(_vm._f(\"fromNow\")(comment.createdAt)))])])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\r\n  <div class=\"col-12\">\r\n    <div class=\"mt-4 mb-2\" v-for=\"comment in Comments\" :key=\"comment.id\">\r\n      <blockquote class=\"blockquote mb-0\">\r\n        <button \r\n          v-if=\"currentUser.isAdmin\" \r\n          type=\"button\" \r\n          class=\"btn btn-sm btn-outline-primary float-right\"\r\n          @click.prevent.stop=\"deleteButtonClick(comment.id)\"\r\n          :disabled=\"isProcessing\"\r\n        >\r\n          <i class=\"fas fa-trash-alt\"></i>\r\n        </button>\r\n        <h5>\r\n          <router-link :to=\"{ name: 'profile', params: { id: comment.UserId}}\">\r\n            {{ comment.User.name }}\r\n          </router-link>\r\n        </h5>\r\n        <div>{{ comment.description }}</div>\r\n        <footer class=\"blockquote-footer\"> {{ comment.createdAt | fromNow }}</footer>\r\n      </blockquote>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport { fromNowFilter } from '../utils/mixins'\r\n\r\nexport default {\r\n  name: 'SingleComments',\r\n  props: {\r\n    Comments: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    currentUser: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    isLoading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    isProcessing: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n    }\r\n  },\r\n  methods: {\r\n      deleteButtonClick(id) {\r\n          this.$emit('deleteComment', id)\r\n      }\r\n  },\r\n  mixins: [\r\n    fromNowFilter\r\n  ]\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleComments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleComments.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SingleComments.vue?vue&type=template&id=4f45b9e6&\"\nimport script from \"./SingleComments.vue?vue&type=script&lang=js&\"\nexport * from \"./SingleComments.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"col-12 mb-3\",on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"form-group mb-4\"},[_c('label',{attrs:{\"for\":\"text\"}},[_vm._v(\"留下評論：\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],staticClass:\"form-control\",attrs:{\"rows\":\"3\",\"name\":\"text\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}})]),_c('div',{staticClass:\"d-flex align-items-center justify-content-between\"},[_c('button',{staticClass:\"btn btn-link\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$router.back()}}},[_vm._v(\"回上一頁\")]),_c('button',{staticClass:\"btn btn-primary mr-0\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing}},[_vm._v(\" \"+_vm._s(_vm.isProcessing ? '處理中...' : '留下評論')+\" \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n<template>\r\n  <form class=\"col-12 mb-3\" @submit.prevent.stop=\"handleSubmit\">\r\n    <div class=\"form-group mb-4\">\r\n      <label for=\"text\">留下評論：</label>\r\n      <textarea\r\n        v-model=\"text\"\r\n        class=\"form-control\"\r\n        rows=\"3\"\r\n        name=\"text\"\r\n      />\r\n    </div>\r\n    <div class=\"d-flex align-items-center justify-content-between\">\r\n      <button\r\n        type=\"button\"\r\n        class=\"btn btn-link\"\r\n        @click=\"$router.back()\"\r\n      >回上一頁</button>\r\n      <button\r\n        type=\"submit\"\r\n        class=\"btn btn-primary mr-0\"\r\n        :disabled=\"isProcessing\"\r\n      >\r\n      {{ isProcessing ? '處理中...' : '留下評論' }}\r\n        \r\n      </button>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nexport default {\r\n  name: 'CreateComments',\r\n  props: {\r\n      productId: {\r\n          type: Number,\r\n          required: true\r\n      },\r\n      isProcessing: {\r\n          type: Boolean,\r\n          default: false\r\n      }\r\n  },\r\n  data() {\r\n    return {\r\n        text: ''\r\n    }\r\n  },\r\n  methods: {\r\n      handleSubmit() {\r\n          this.$emit('createComment',{\r\n              productId: this.productId,\r\n              description: this.text\r\n          })\r\n          this.text = ''\r\n      },\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateComment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateComment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateComment.vue?vue&type=template&id=4e675915&\"\nimport script from \"./CreateComment.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateComment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"container\">\r\n    <hr />\r\n    <Spinner :class=\"{ 'fade-out': !isLoading }\" />\r\n    <div class=\"row p-0 m-0 mb-5 mt-4 card shadow\">\r\n      <div class=\"row p-3 mr-3 mt-5 ml-3\">\r\n        <SingleDetail\r\n          :initial-product=\"product\"\r\n          :commentsLength=\"Comments.length\"\r\n          :likesLength=\"likes.length\"\r\n          :is-loading=\"isLoading\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"col-12 m-0 mb-3 pl-0 pr-0 product__info__block\">\r\n        <div id=\"productNav\" class=\"row product__nav__block\">\r\n          <div\r\n            class=\"btn product__nav__button\"\r\n            :class=\"{ active: tabState === 'productDetail' }\"\r\n            @click.prevent.stop=\"toggleTabContent('productDetail')\"\r\n          >\r\n            商品詳情\r\n          </div>\r\n          <div\r\n            class=\"btn product__nav__button\"\r\n            :class=\"{ active: tabState === 'productComments' }\"\r\n            @click.prevent.stop=\"toggleTabContent('productComments')\"\r\n          >\r\n            商品評論\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          v-if=\"product.description !== ''\"\r\n          class=\"row col-md-12 mt-5 mr-0 ml-0 mb-5 tab-panel\"\r\n          :class=\"{ show: tabState === 'productDetail' }\"\r\n        >\r\n          <div class=\"col-12\">{{ product.description }}</div>\r\n        </div>\r\n\r\n        <div\r\n          v-else\r\n          class=\"row col-md-12 mt-5 mr-0 ml-0 mb-5 tab-panel\"\r\n          :class=\"{ show: tabState === 'productDetail' }\"\r\n        >\r\n          <h3 class=\"col-12 text-center\">本商品目前無任何描述</h3>\r\n        </div>\r\n\r\n        <div\r\n          class=\"row col-md-12 mt-2 mr-0 ml-0 mb-5 tab-panel\"\r\n          :class=\"{ show: tabState === 'productComments' }\"\r\n        >\r\n          <div class=\"row col-md-12 mt-4 mr-0 ml-0 mb-2\">\r\n            <CreateComment\r\n              :is-processing=\"isProcessing\"\r\n              :currentUser=\"currentUser\"\r\n              :productId=\"product.id\"\r\n              @createComment=\"createComment\"\r\n            />\r\n          </div>\r\n\r\n          <div v-show=\"Comments.length\" class=\"row col-md-12 mr-0 ml-0\">\r\n            <SingleComments\r\n              :is-processing=\"isProcessing\"\r\n              :currentUser=\"currentUser\"\r\n              :Comments=\"Comments\"\r\n              @deleteComment=\"deleteComment\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          v-show=\"!Comments.length\"\r\n          class=\"row col-md-12 mt-5 mr-0 ml-0 mb-5 tab-panel\"\r\n          :class=\"{ show: tabState === 'productComments' }\"\r\n        >\r\n          <h3 class=\"col-12 text-center\">尚無評論</h3>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SingleDetail from '../components/SingleDetail'\r\nimport SingleComments from '../components/SingleComments'\r\nimport CreateComment from '../components/CreateComment'\r\nimport productsAPI from '../apis/products'\r\nimport Spinner from '../components/Spinner'\r\nimport { Toast } from '../utils/helpers'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  name: 'ProductDetail',\r\n  computed: {\r\n    ...mapState(['currentUser']),\r\n  },\r\n  components: {\r\n    SingleDetail,\r\n    SingleComments,\r\n    CreateComment,\r\n    Spinner,\r\n  },\r\n  data() {\r\n    return {\r\n      product: {\r\n        Category: {},\r\n        CategoryId: -1,\r\n        description: '',\r\n        id: -1,\r\n        image: '',\r\n        name: '',\r\n        price: -1,\r\n        viewCount: -1,\r\n      },\r\n      likes: [],\r\n      Comments: [],\r\n      isProcessing: false,\r\n      isLoading: false,\r\n      tabState: 'productDetail',\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchData(id) {\r\n      try {\r\n        this.isLoading = true\r\n        const { data } = await productsAPI.products.getDetail({ id })\r\n        this.product = data.product\r\n        this.Comments = data.comments\r\n        this.likes = data.likes\r\n        this.isLoading = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.toastFire('error', '無法取得商品資訊')\r\n      }\r\n    },\r\n    async createComment(payload) {\r\n      try {\r\n        this.isProcessing = true\r\n\r\n        const { data } = await productsAPI.comments.create({ payload })\r\n        if (data.status !== 'success') {\r\n          this.toastFire('error', data.message)\r\n          this.isProcessing = false\r\n          return\r\n        }\r\n        const id = payload.productId\r\n        const detailData = await productsAPI.products.getDetail({ id })\r\n        this.Comments = detailData.data.comments\r\n        this.toastFire('success', data.message)\r\n        this.isProcessing = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.toastFire('error', '操作失敗，請稍後再試')\r\n        this.isProcessing = false\r\n      }\r\n    },\r\n    async deleteComment(id) {\r\n      try {\r\n        this.isProcessing = true\r\n        const { data } = await productsAPI.comments.delete({ id })\r\n        console.log(data)\r\n        if (data.status !== 'success') {\r\n          this.toastFire('error', data.message)\r\n          this.isProcessing = false\r\n          return\r\n        }\r\n        this.Comments = this.Comments.filter((c) => c.id !== id)\r\n        this.toastFire('success', data.message)\r\n        this.isProcessing = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.toastFire('error', '操作失敗，請稍後再試')\r\n        this.isProcessing = false\r\n      }\r\n    },\r\n    toggleTabContent(state) {\r\n      this.tabState = state\r\n    },\r\n    toastFire(action, text) {\r\n      Toast.fire({\r\n        icon: action,\r\n        title: text,\r\n        background: '#eee',\r\n        showConfirmButton: false,\r\n      })\r\n    },\r\n  },\r\n  created() {\r\n    const { id } = this.$route.params\r\n    this.fetchData(id)\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    const { id } = to.params\r\n    this.fetchData(id)\r\n    next()\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.product__info__block .product__nav__button:hover {\r\n  background-color: #3a3a3a1c !important;\r\n}\r\n</style>\r\n\r\n<style scoped>\r\n.tab-panel {\r\n  display: none;\r\n}\r\n.tab-panel.show {\r\n  display: flex;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProductDetail.vue?vue&type=template&id=5551dd5e&scoped=true&\"\nimport script from \"./ProductDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./ProductDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProductDetail.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./ProductDetail.vue?vue&type=style&index=1&id=5551dd5e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5551dd5e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductDetail.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductDetail.vue?vue&type=style&index=1&id=5551dd5e&scoped=true&lang=css&\""],"sourceRoot":""}