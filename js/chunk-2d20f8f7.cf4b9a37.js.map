{"version":3,"sources":["webpack:///./src/views/Results.vue?a3d7","webpack:///./src/components/NavPills.vue?b92a","webpack:///src/components/NavPills.vue","webpack:///./src/components/NavPills.vue?4418","webpack:///./src/components/NavPills.vue","webpack:///src/views/Results.vue","webpack:///./src/views/Results.vue?67b1","webpack:///./src/views/Results.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","isLoading","_v","attrs","categories","_l","item","key","id","currentPage","totalPage","prevPage","nextPage","categoryId","staticRenderFns","name","category","query","_s","props","type","Array","required","component","components","ProductCards","NavPills","Pagination","Spinner","data","products","beforeRouteUpdate","fetchData","next","methods","toastFire","icon","action","title","text","background","showConfirmButton","created","queryPage","queryCategoryId"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,UAAU,CAACG,MAAM,CAAE,YAAaP,EAAIQ,aAAcJ,EAAG,KAAK,CAACE,YAAY,QAAQ,CAACN,EAAIS,GAAG,UAAUL,EAAG,MAAMA,EAAG,WAAW,CAACM,MAAM,CAAC,WAAaV,EAAIW,cAAcP,EAAG,MAAM,CAACE,YAAY,YAAYN,EAAIY,GAAIZ,EAAY,UAAE,SAASa,GAAM,OAAOT,EAAG,eAAe,CAACU,IAAID,EAAKE,GAAGL,MAAM,CAAC,eAAeG,QAAU,GAAGT,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,aAAa,CAACM,MAAM,CAAC,YAAcV,EAAIgB,YAAY,UAAYhB,EAAIiB,UAAU,SAAWjB,EAAIkB,SAAS,SAAWlB,EAAImB,SAAS,WAAanB,EAAIoB,eAAe,IAAI,IAChpBC,EAAkB,G,oCCDlB,EAAS,WAAa,IAAIrB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,KAAK,CAACE,YAAY,sBAAsB,CAACF,EAAG,KAAK,CAACE,YAAY,YAAY,CAACF,EAAG,cAAc,CAACE,YAAY,WAAWI,MAAM,CAAC,GAAK,CAAEY,KAAM,aAAc,CAACtB,EAAIS,GAAG,WAAW,GAAGT,EAAIY,GAAIZ,EAAc,YAAE,SAASuB,GAAU,OAAOnB,EAAG,KAAK,CAACU,IAAIS,EAASR,GAAGT,YAAY,YAAY,CAACF,EAAG,cAAc,CAACE,YAAY,WAAWI,MAAM,CAAC,GAAK,CAChaY,KAAM,UACNE,MAAO,CAAEJ,WAAYG,EAASR,OAC1B,CAACf,EAAIS,GAAG,IAAIT,EAAIyB,GAAGF,EAASD,MAAM,QAAQ,OAAM,IACxD,EAAkB,GC0BtB,GACEI,MAAO,CACLf,WAAY,CACVgB,KAAMC,MACNC,UAAU,KClCkU,I,YCO9UC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,wDCaf,GACER,KAAM,UACNS,WAAY,CACVC,aAAJ,OACIC,SAAJ,EACIC,WAAJ,OACIC,QAAJ,QAEEC,KARF,WASI,MAAO,CACLC,SAAU,GACV1B,WAAY,GACZS,YAAa,EACbJ,YAAa,EACbC,UAAW,GACXC,UAAW,EACXC,UAAW,EACXX,WAAW,IAGf8B,kBApBF,SAoBA,aACA,QADA,IACA,YADA,MACA,GADA,MACA,kBADA,MACA,GADA,EAEIrC,KAAKsC,UAAU,CAAnB,gCACIC,KAEFC,QAAS,CACP,UADJ,YACA,oOAEA,eAFA,SAGA,iBACA,OACA,eALA,OAGA,EAHA,SAeA,OAPA,EARA,EAQA,SACA,EATA,EASA,WACA,EAVA,EAUA,WACA,EAXA,EAWA,KACA,EAZA,EAYA,UACA,EAbA,EAaA,KACA,EAdA,EAcA,KAEA,aACA,eACA,eACA,gBACA,cACA,aACA,aACA,eAvBA,qDAyBA,kBACA,gCACA,eA3BA,6DA8BIC,UA/BJ,SA+BA,KACM,EAAN,WACQC,KAAMC,EACNC,MAAOC,EACPC,WAAY,OACZC,mBAAmB,MAIzBC,QAjEF,WAkEIhD,KAAKsC,UAAU,CACbW,UAAW,GACXC,gBAAiB,OCnG0T,ICO7U,EAAY,eACd,EACApD,EACAsB,GACA,EACA,KACA,KACA,MAIa,e","file":"js/chunk-2d20f8f7.cf4b9a37.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container mt-1\"},[_c('Spinner',{class:{ 'fade-out': !_vm.isLoading }}),_c('h1',{staticClass:\"mt-5\"},[_vm._v(\"商品分類\")]),_c('hr'),_c('NavPills',{attrs:{\"categories\":_vm.categories}}),_c('div',{staticClass:\"row mt-4\"},_vm._l((_vm.products),function(item){return _c('ProductCards',{key:item.id,attrs:{\"initial-item\":item}})}),1),_c('div',{staticClass:\"row justify-content-center\"},[_c('Pagination',{attrs:{\"currentPage\":_vm.currentPage,\"totalPage\":_vm.totalPage,\"prevPage\":_vm.prevPage,\"nextPage\":_vm.nextPage,\"categoryId\":_vm.categoryId}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"nav nav-pills mb-4\"},[_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":{ name: 'results' }}},[_vm._v(\" 全部 \")])],1),_vm._l((_vm.categories),function(category){return _c('li',{key:category.id,staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":{ \n        name: 'results',\n        query: { categoryId: category.id }\n        }}},[_vm._v(\" \"+_vm._s(category.name)+\" \")])],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ul class=\"nav nav-pills mb-4\">\r\n    <li class=\"nav-item\">\r\n      <router-link\r\n        class=\"nav-link\"\r\n        :to=\"{ name: 'results' }\"\r\n      >\r\n        全部\r\n      </router-link>\r\n    </li>\r\n\r\n    <li\r\n      v-for=\"category in categories\"\r\n      :key=\"category.id\"\r\n      class=\"nav-item\"\r\n    >\r\n      <router-link\r\n        class=\"nav-link\"\r\n        :to=\"{ \r\n          name: 'results',\r\n          query: { categoryId: category.id }\r\n          }\"\r\n      >\r\n        {{ category.name }}\r\n      </router-link>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    categories: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavPills.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavPills.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NavPills.vue?vue&type=template&id=54e278c6&\"\nimport script from \"./NavPills.vue?vue&type=script&lang=js&\"\nexport * from \"./NavPills.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"container mt-1\">\r\n    <Spinner\r\n      :class=\"{ 'fade-out': !isLoading }\"\r\n    />\r\n    <h1 class=\"mt-5\">商品分類</h1>\r\n    <hr>\r\n    <NavPills :categories=\"categories\" />\r\n    <div class=\"row mt-4\">\r\n      <ProductCards v-for=\"item in products\" :key=\"item.id\" :initial-item=\"item\" />\r\n    </div>\r\n    <div class=\"row justify-content-center\">\r\n      <Pagination \r\n        :currentPage=\"currentPage\" \r\n        :totalPage=\"totalPage\"\r\n        :prevPage=\"prevPage\"\r\n        :nextPage=\"nextPage\"\r\n        :categoryId=\"categoryId\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ProductCards from '../components/ProductCards'\r\nimport NavPills from '../components/NavPills'\r\nimport Pagination from '../components/Pagination'\r\nimport Spinner from '../components/Spinner'\r\nimport indexAPI from '../apis/products'\r\nimport { Toast } from '../utils/helpers'\r\n\r\nexport default {\r\n  name: 'Results',\r\n  components: {\r\n    ProductCards,\r\n    NavPills,\r\n    Pagination,\r\n    Spinner\r\n  },\r\n  data() {\r\n    return {\r\n      products: [],\r\n      categories: [],\r\n      categoryId: -1,\r\n      currentPage: 1,\r\n      totalPage: [],\r\n      prevPage: -1,\r\n      nextPage: -1,\r\n      isLoading: false\r\n    }\r\n  },\r\n  beforeRouteUpdate(to, from, next){\r\n    const { page = '' , categoryId = '' } = to.query\r\n    this.fetchData({queryPage: page, queryCategoryId: categoryId })\r\n    next()\r\n  },\r\n  methods: {\r\n    async fetchData({ queryPage, queryCategoryId }) {\r\n      try {\r\n        this.isLoading = true\r\n        const res = await indexAPI.getIndex({\r\n          page: queryPage,\r\n          categoryId: queryCategoryId,\r\n        })\r\n        const {\r\n          products,\r\n          categories,\r\n          categoryId,\r\n          page,\r\n          totalPage,\r\n          prev,\r\n          next,\r\n        } = res.data\r\n        this.products = products\r\n        this.categories = categories\r\n        this.categoryId = categoryId\r\n        this.currentPage = page\r\n        this.totalPage = totalPage\r\n        this.nextPage = next\r\n        this.prevPage = prev\r\n        this.isLoading = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.toastFire('error', '無法取得首頁資訊')\r\n        this.isLoading = false\r\n      }\r\n    },\r\n    toastFire(action, text) {\r\n      Toast.fire({\r\n        icon: action,\r\n        title: text,\r\n        background: '#eee',\r\n        showConfirmButton: false,\r\n      })\r\n    },\r\n  },\r\n  created() {\r\n    this.fetchData({\r\n      queryPage: '',\r\n      queryCategoryId: '',\r\n    })\r\n  },\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Results.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Results.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Results.vue?vue&type=template&id=70364314&\"\nimport script from \"./Results.vue?vue&type=script&lang=js&\"\nexport * from \"./Results.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}