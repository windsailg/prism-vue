(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4762ded2"],{5630:function(t,e,a){},b9b7:function(t,e,a){"use strict";a("ef32")},ba6d:function(t,e,a){"use strict";a("5630")},ef32:function(t,e,a){},ff46:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Spinner",{class:{"fade-out":!t.isLoading}}),a("UserDetailEdit",{attrs:{"initial-profile":t.profile,"is-processing":t.isProcessing},on:{"after-submit":t.handleAfterSubmit}})],1)},i=[],s=a("1da1"),n=(a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{id:"targetForm"},on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmit(e)}}},[a("div",{staticClass:"user__cover edit",style:{"background-image":"url("+t.profile.cover+")"}},[a("input",{staticClass:"custom-file-input image__input",attrs:{type:"file",name:"cover",id:"cover"},on:{change:t.handleFileChange}}),t._m(0)]),a("div",{staticClass:"row shadow card profile__block mb-5"},[a("div",{staticClass:"col-md-4 mt-3 profile__avatar"},[a("figure",{staticClass:"figure"},[a("img",{staticClass:"figure-img img-fluid rounded img__box mxw__avatar rounded-circle",attrs:{src:t.profile.avatar,alt:"user_avatar"}}),a("input",{staticClass:"custom-file-input image__input",attrs:{type:"file",name:"avatar",id:"avatar"},on:{change:t.handleFileChange}}),t._m(1),a("figcaption",{staticClass:"figure-caption"})])]),a("div",{staticClass:"row p-3 m-3 mr-1 ml-1 col-8"},[a("div",{staticClass:"col-md-8 mt-5 pl-4"},[a("div",{staticClass:"row mt-4"}),a("div",{staticClass:"form-group"},[t._m(2),a("input",{staticClass:"form-control",attrs:{type:"text",name:"name",id:"name",placeholder:"Enter User Name",spellcheck:"false"},domProps:{value:t.profile.name}})]),a("div",{staticClass:"form-group"},[t._m(3),a("input",{staticClass:"form-control",attrs:{type:"text",name:"account",id:"account",placeholder:"Enter User Name"},domProps:{value:t.profile.account}})]),a("div",{staticClass:"form-group"},[t._m(4),a("input",{staticClass:"form-control",attrs:{type:"text",name:"email",id:"email",placeholder:"Enter User E-mail"},domProps:{value:t.profile.email}})]),a("div",{staticClass:"form-group"},[t._m(5),a("input",{staticClass:"form-control inputer",attrs:{type:"number",name:"phone",id:"phone",placeholder:"phone number"},domProps:{value:t.profile.phone}})]),a("div",{staticClass:"form-group"},[t._m(6),a("input",{staticClass:"form-control",attrs:{type:"text",name:"address",id:"address",placeholder:"address"},domProps:{value:t.profile.address}})]),a("div",{staticClass:"form-group"},[t._m(7),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.profile.introduction,expression:"profile.introduction"}],staticClass:"form-control inputer textarea",attrs:{type:"text",placeholder:"type your own introduction...",name:"introduction",id:"introduction"},domProps:{value:t.profile.introduction},on:{input:function(e){e.target.composing||t.$set(t.profile,"introduction",e.target.value)}}})])])]),a("div",{staticClass:"profile__control__box row col-8 justify-content-end"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.isProcessing}},[a("i",{staticClass:"fas fa-save text-light"}),t._v(" "+t._s(t.isProcessing?"處理中...":"儲存")+" ")])])])])}),o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"custom-file-label image__label",attrs:{for:"cover"}},[a("i",{staticClass:"fas fa-camera"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"custom-file-label image__label",attrs:{for:"avatar"}},[a("i",{staticClass:"fas fa-camera"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"name"}},[a("i",{staticClass:"fas fa-signature mr-2"}),t._v(" 顯示名稱 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"account"}},[a("i",{staticClass:"fas fa-user-circle mr-2"}),t._v(" 帳號 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"email"}},[a("i",{staticClass:"fas fa-envelope mr-2"}),t._v(" E-mail ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"phone"}},[a("i",{staticClass:"fas fa-phone-alt mr-2"}),t._v(" 連絡電話 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"address"}},[a("i",{staticClass:"fas fa-map-marker-alt mr-2"}),t._v(" 寄送地址 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"introduction"}},[a("i",{staticClass:"fas fa-envelope-open-text mr-2"}),t._v(" Introduction ")])}],c=a("5530"),l=(a("b0c0"),a("2b3d"),a("d3b7"),a("3ca3"),a("ddb0"),{name:"UserDetailEdit",props:{initialProfile:{type:Object,default:function(){return{account:"",name:"",email:"",phone:"",address:"",avatar:"",cover:"",introduction:""}}},isProcessing:{type:Boolean,default:!1}},data:function(){return{profile:Object(c["a"])({},this.initialProfile)}},methods:{handleFileChange:function(t){var e=t.target.files,a=t.target.name;e.length?this.profile[a]=window.URL.createObjectURL(e[0]):this.profile[a]=this.initialProfile[a]},handleSubmit:function(t){var e=new FormData(t.target);this.$emit("after-submit",e)}},watch:{initialProfile:function(t){this.profile=Object(c["a"])(Object(c["a"])({},this.profile),t)}}}),u=l,f=(a("ba6d"),a("2877")),m=Object(f["a"])(u,n,o,!1,null,"7aad510a",null),d=m.exports,p=a("2375"),v=a("4cce"),h=a("2fa3"),g={name:"ProfileEdit",components:{UserDetailEdit:d,Spinner:p["a"]},data:function(){return{profile:{id:"",account:"",name:"",email:"",phone:"",address:"",avatar:"",cover:"",introduction:""},isProcessing:!1,isLoading:!1}},methods:{fetchData:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isLoading=!0,a.next=4,v["a"].getUser({id:t});case 4:r=a.sent,i=r.data,e.profile=i.profile,e.isLoading=!1,a.next=15;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0),e.isLoading=!1,e.toastFire("error",a.t0||"取得使用者資訊失敗，請檢查連線狀態或稍後再試");case 15:case"end":return a.stop()}}),a,null,[[0,10]])})))()},handleAfterSubmit:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isProcessing=!0,r=e.profile.id,a.next=5,v["a"].editUser({id:r,formData:t});case 5:if(i=a.sent,s=i.data,"success"===s.status){a.next=11;break}throw e.isProcessing=!1,e.toastFire("error",s.message),new Error(s.message);case 11:e.toastFire("success",s.message),e.fetchData(r),e.isProcessing=!1,e.$router.push({name:"profile",params:{id:r}}),a.next=22;break;case 17:a.prev=17,a.t0=a["catch"](0),console.log(a.t0),e.isProcessing=!1,e.toastFire("error",a.t0||"取得使用者資訊失敗，請檢查連線狀態或稍後再試");case 22:case"end":return a.stop()}}),a,null,[[0,17]])})))()},toastFire:function(t,e){h["a"].fire({icon:t,title:e,background:"#eee",showConfirmButton:!1})}},beforeRouteUpdate:function(t,e,a){var r=t.params.id;this.fetchData(r),a()},created:function(){var t=this.$route.params.id;this.fetchData(t)}},_=g,b=(a("b9b7"),Object(f["a"])(_,r,i,!1,null,"57aea4c7",null));e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-4762ded2.7f7058e3.js.map