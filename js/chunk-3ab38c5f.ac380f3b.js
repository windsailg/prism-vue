(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ab38c5f"],{"774e":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container py-5"},[s("Spinner",{class:{"fade-out":!t.isLoading}}),s("h1",{staticClass:"mt-5"},[t._v(" 活躍用戶 ")]),s("hr"),s("div",{staticClass:"row text-center"},t._l(t.topUsers,(function(e){return s("div",{key:e.id,staticClass:" col-md-3 mb-4"},[s("div",{staticClass:"card topUser__block shadow-sm "},[s("img",{staticClass:"topUser__cover",attrs:{loading:"lazy",src:e.cover}}),s("div",{staticClass:"card-head topUser__imagine pt-3 pb-3"},[s("router-link",{attrs:{to:{name:"profile",params:{id:e.id}}}},[s("img",{staticClass:"rounded-circle img-thumbnail shadow-sm img__box mxw__user lazy",attrs:{src:e.avatar}})])],1),s("div",{staticClass:"card-body pt-0 pb-2 pr-4 pl-4"},[s("h4",{staticClass:"topUser__name"},[t._v(t._s(e.name))]),s("span",{staticClass:"badge badge-pill badge-info "},[t._v("關注人數："+t._s(e.FollowerCount))]),t.currentUser.id!==e.id?s("div",{staticClass:"row justify-content-center mt-3 mb-2"},[e.isFollowed?s("button",{staticClass:"btn btn-primary disabled btn-sm",attrs:{type:"submit"},on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.removeFollow(e.id)}}},[t._v(" 取消關注 ")]):s("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"},on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.addFollow(e.id)}}},[t._v("+ 關注 ")])]):s("div",{staticClass:"row justify-content-center mt-3 mb-2"},[s("router-link",{staticClass:"btn btn-success btn-sm",attrs:{to:{name:"profile",params:{id:e.id}}}},[t._v(" 個人檔案 ")])],1)])])])})),0)],1)},a=[],n=s("1da1"),o=s("5530"),i=(s("d81d"),s("96cf"),s("4cce")),c=s("2375"),u=s("2f62"),l=s("2fa3"),d={name:"topUsers",computed:Object(o["a"])({},Object(u["b"])(["currentUser"])),components:{Spinner:c["a"]},data:function(){return{topUsers:[],isProcessing:!1,isLoading:!1}},methods:{fetchData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,i["a"].getTopUsers();case 4:s=e.sent,r=s.data.users,t.topUsers=r,t.isLoading=!1,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),t.$toast.error("","無法取得用戶資訊",l["c"].options.error),t.isLoading=!1;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},addFollow:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,i["a"].addFollowing({id:t});case 4:if(r=s.sent,a=r.data,"success"===a.status){s.next=9;break}throw e.$toast.error("",a.message,l["c"].options.error),new Error(a.message);case 9:e.topUsers=e.topUsers.map((function(e){return e.id===t?Object(o["a"])(Object(o["a"])({},e),{},{isFollowed:!0}):e})),e.$toast.show(" ",a.message,l["c"].options.success),e.isProcessing=!1,s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),console.log(s.t0),e.$toast.error("","操作失敗，請稍後再試",l["c"].options.error);case 18:case"end":return s.stop()}}),s,null,[[0,14]])})))()},removeFollow:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,i["a"].removeFollowing({id:t});case 4:if(r=s.sent,a=r.data,"success"===a.status){s.next=9;break}throw e.toastFire("error",a.message),new Error(a.message);case 9:e.topUsers=e.topUsers.map((function(e){return e.id===t?Object(o["a"])(Object(o["a"])({},e),{},{isFollowed:!1}):e})),e.$toast.show(" ",a.message,l["c"].options.success),e.isProcessing=!1,s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),console.log(s.t0),e.$toast.error("","操作失敗，請稍後再試",l["c"].options.error);case 18:case"end":return s.stop()}}),s,null,[[0,14]])})))()}},created:function(){this.fetchData()}},p=d,m=s("2877"),b=Object(m["a"])(p,r,a,!1,null,null,null);e["default"]=b.exports},d81d:function(t,e,s){"use strict";var r=s("23e7"),a=s("b727").map,n=s("1dde"),o=n("map");r({target:"Array",proto:!0,forced:!o},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-3ab38c5f.ac380f3b.js.map