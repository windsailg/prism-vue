{"version":3,"sources":["webpack:///./src/views/Tops.vue?fbfa","webpack:///./src/components/TopProducts.vue?9532","webpack:///src/components/TopProducts.vue","webpack:///./src/components/TopProducts.vue?451b","webpack:///./src/components/TopProducts.vue","webpack:///src/views/Tops.vue","webpack:///./src/views/Tops.vue?528c","webpack:///./src/views/Tops.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","isLoading","_v","_l","product","key","id","attrs","staticRenderFns","name","params","image","isActive","isLiked","isProcessing","on","$event","preventDefault","stopPropagation","removeLiked","addLiked","_s","likeCount","price","props","initialProduct","type","Object","required","data","methods","toastFire","icon","action","title","text","background","showConfirmButton","component","components","TopProducts","Spinner","products","created","fetchData"],"mappings":"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","file":"js/chunk-2d21aea0.b9ec6aba.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-5\"},[_c('Spinner',{class:{ 'fade-out': !_vm.isLoading }}),_c('h1',{staticClass:\"mt-5\"},[_vm._v(\" 熱門商品 \")]),_c('hr'),_c('div',{staticClass:\"row mt-4\"},_vm._l((_vm.products),function(product){return _c('TopProducts',{key:product.id,attrs:{\"initial-product\":product}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-md-3\"},[_c('div',{staticClass:\"card borderless mb-3 p-4\"},[_c('div',{staticClass:\"card-head shadow\"},[_c('router-link',{attrs:{\"to\":{\n          name: 'products',\n          params: {\n            id: _vm.product.id,\n          },\n        }}},[_c('img',{staticClass:\"card-img-top lazy\",attrs:{\"src\":_vm.product.image,\"width\":\"286px\",\"height\":\"180px\"}})]),(_vm.product.isLiked)?_c('div',{staticClass:\"like__block\",class:{ isActive: _vm.product.isLiked }},[_c('button',{staticClass:\"btn text-danger\",attrs:{\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.removeLiked(_vm.product.id)}}},[_c('i',{staticClass:\"fas fa-heart\"})])]):_c('div',{staticClass:\"like__block\"},[_c('button',{staticClass:\"btn text-light\",attrs:{\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.addLiked(_vm.product.id)}}},[_c('i',{staticClass:\"far fa-heart\"})])])],1),_c('div',{staticClass:\"card-body pt-3 p-1\"},[_c('router-link',{staticClass:\"h5\",attrs:{\"to\":{\n          name: 'products',\n          params: {\n            id: _vm.product.id,\n          },\n        }}},[_vm._v(\" \"+_vm._s(_vm.product.name)+\" \")]),_c('br'),_c('span',{staticClass:\"badge badge-pill badge-info\"},[_vm._v(\" 喜歡的人數: \"+_vm._s(_vm.product.likeCount)+\" \"),_c('strong')]),_c('div',{staticClass:\"row pt-2 pr-3 pl-3\"},[_c('span',[_vm._v(\"NT: \"+_vm._s(_vm.product.price))])])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"col-md-3\">\r\n    <div class=\"card borderless mb-3 p-4\">\r\n      <div class=\"card-head shadow\">\r\n        <router-link\r\n          :to=\"{\r\n            name: 'products',\r\n            params: {\r\n              id: product.id,\r\n            },\r\n          }\"\r\n        >\r\n          <img\r\n            class=\"card-img-top lazy\"\r\n            :src=\"product.image\"\r\n            width=\"286px\"\r\n            height=\"180px\"\r\n          />\r\n        </router-link>\r\n        <div\r\n          v-if=\"product.isLiked\"\r\n          class=\"like__block\"\r\n          :class=\"{ isActive: product.isLiked }\"\r\n        >\r\n          <button class=\"btn text-danger\"\r\n            @click.prevent.stop=\"removeLiked(product.id)\"\r\n            :disabled=\"isProcessing\"\r\n          >\r\n            <i class=\"fas fa-heart\"></i>\r\n          </button>\r\n        </div>\r\n\r\n        <div v-else class=\"like__block\">\r\n          <button\r\n            class=\"btn text-light\" \r\n            @click.prevent.stop=\"addLiked(product.id)\"\r\n            :disabled=\"isProcessing\"\r\n          >\r\n            <i class=\"far fa-heart\"></i>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"card-body pt-3 p-1\">\r\n        <router-link class=\"h5\" \r\n          :to=\"{\r\n            name: 'products',\r\n            params: {\r\n              id: product.id,\r\n            },\r\n          }\"\r\n        >\r\n          {{ product.name }}\r\n        </router-link>\r\n        <br />\r\n        <span class=\"badge badge-pill badge-info\">\r\n          喜歡的人數: {{ product.likeCount }}\r\n          <strong></strong>\r\n        </span>\r\n        <div class=\"row pt-2 pr-3 pl-3\">\r\n          <span>NT: {{ product.price }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport userAPI from '../apis/users'\r\nimport { Toast } from '../utils/helpers'\r\nexport default {\r\n  name: 'topProducts',\r\n  props: {\r\n    initialProduct: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      product: this.initialProduct,\r\n      isProcessing: false\r\n    }\r\n  },\r\n  methods: {\r\n    async addLiked(id) {\r\n      try {\r\n        this.isProcessing = true\r\n        const { data } = await userAPI.addLike({ id })\r\n        if (data.status !== 'success') {\r\n          this.toastFire('error', data.message)\r\n          throw new Error(data.message)\r\n        }\r\n        this.product = {\r\n          ...this.product,\r\n          isLiked: true,\r\n        }\r\n        this.toastFire('success', data.message)\r\n        this.isProcessing = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.toastFire('error', '取得使用者資訊失敗')\r\n      }\r\n    },\r\n    async removeLiked(id) {\r\n      try {\r\n        this.isProcessing = true\r\n        const { data } = await userAPI.removeLike({ id })\r\n        if (data.status !== 'success') {\r\n          this.toastFire('error', data.message)\r\n          throw new Error(data.message)\r\n        }\r\n        this.product = {\r\n          ...this.product,\r\n          isLiked: false,\r\n        }\r\n        this.toastFire('success', data.message)\r\n        this.isProcessing = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.toastFire('error', '取得使用者資訊失敗')\r\n      }\r\n    },\r\n    toastFire(action, text) {\r\n      Toast.fire({\r\n        icon: action,\r\n        title: text,\r\n        background: '#eee',\r\n        showConfirmButton: false,\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopProducts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopProducts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TopProducts.vue?vue&type=template&id=2f083035&\"\nimport script from \"./TopProducts.vue?vue&type=script&lang=js&\"\nexport * from \"./TopProducts.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"container py-5\">\r\n    <Spinner :class=\"{ 'fade-out': !isLoading }\" />\r\n    <h1 class=\"mt-5\">\r\n      熱門商品\r\n    </h1>\r\n    \r\n    <hr>\r\n\r\n    <div class=\"row mt-4\">\r\n      <TopProducts v-for=\"product in products\" :key=\"product.id\" :initial-product=\"product\" />\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TopProducts from '../components/TopProducts'\r\nimport indexAPI from '../apis/products'\r\nimport Spinner from '../components/Spinner'\r\nimport { Toast } from '../utils/helpers'\r\n\r\nexport default {\r\n  name: 'Tops',\r\n  components: {\r\n    TopProducts,\r\n    Spinner\r\n  },\r\n  data() {\r\n    return {\r\n      products: [],\r\n      isLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchData() {\r\n      try {\r\n        this.isLoading = true\r\n        const res = await indexAPI.getTops()\r\n          const {\r\n        products,\r\n      } = res.data\r\n        this.products = products\r\n        this.isLoading = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.toastFire('error', '無法取得首頁資訊')\r\n        this.isLoading = false\r\n      }\r\n    },\r\n    toastFire(action, text) {\r\n      Toast.fire({\r\n        icon: action,\r\n        title: text,\r\n        background: '#eee',\r\n        showConfirmButton: false,\r\n      })\r\n    },\r\n  },\r\n  created() {\r\n    this.fetchData()\r\n  },\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tops.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tops.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tops.vue?vue&type=template&id=48e64432&\"\nimport script from \"./Tops.vue?vue&type=script&lang=js&\"\nexport * from \"./Tops.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}